<!DOCTYPE html>
<html>
<head>
    <title>调试页面</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
<h1>系统调试页面</h1>

<div>
    <h2>1. 检查基本页面访问</h2>
    <button onclick="checkPage('index.html')">检查首页</button>
    <button onclick="checkPage('admin-login.html')">检查管理员登录页</button>
    <button onclick="checkPage('login-register.html')">检查用户登录页</button>
    <div id="pageCheckResult"></div>
</div>

<div>
    <h2>2. 检查API端点</h2>
    <button onclick="checkEndpoint('./test-login')">检查测试登录端点</button>
    <button onclick="checkEndpoint('./login')">检查登录端点</button>
    <div id="endpointCheckResult"></div>
</div>

<div>
    <h2>3. 模拟登录请求</h2>
    <form id="testForm">
        <label>手机号: <input type="text" id="mobile" value="13800138000"></label><br><br>
        <label>密码: <input type="password" id="password" value="admin123"></label><br><br>
        <button type="button" onclick="testLogin()">测试登录</button>
    </form>
    <div id="loginTestResult"></div>
</div>

<script>
    function checkPage(page) {
        $.ajax({
            url: page,
            method: 'GET',
            success: function(data) {
                $('#pageCheckResult').html('<p style="color: green;">页面 ' + page + ' 访问成功</p>');
            },
            error: function(xhr, status, error) {
                $('#pageCheckResult').html('<p style="color: red;">页面 ' + page + ' 访问失败: ' + error + '</p>');
            }
        });
    }

    function checkEndpoint(endpoint) {
        $.ajax({
            url: endpoint,
            method: 'GET',
            success: function(data) {
                $('#endpointCheckResult').html('<p style="color: green;">端点 ' + endpoint + ' 访问成功: ' + JSON.stringify(data) + '</p>');
            },
            error: function(xhr, status, error) {
                $('#endpointCheckResult').html('<p style="color: red;">端点 ' + endpoint + ' 访问失败: ' + error + '</p>');
            }
        });
    }

    function testLogin() {
        const mobile = $('#mobile').val();
        const password = $('#password').val();
        
        $.ajax({
            url: './login',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                mobile: mobile,
                pwd: password,
                loginType: 'admin'
            }),
            success: function(data) {
                $('#loginTestResult').html('<p style="color: green;">登录测试成功: ' + JSON.stringify(data) + '</p>');
            },
            error: function(xhr, status, error) {
                $('#loginTestResult').html('<p style="color: red;">登录测试失败: ' + error + '<br>响应内容: ' + xhr.responseText + '</p>');
            }
        });
    }
</script>
</body>
</html>